import{IS_IOS}from"./constants.js";class GeneratedSoundFx{constructor(){this.audioCues=!1,this.context=null,this.panner=null}init(){this.audioCues=!1,this.context||(this.context=new(window.webkitAudioContext?webkitAudioContext:AudioContext),IS_IOS&&(this.context.onstatechange=()=>{"running"!==this.context.state&&this.context.resume()},this.context.resume()),this.panner=this.context.createStereoPanner?this.context.createStereoPanner():null)}stopAll(){this.cancelFootSteps()}playNote(frequency,startTime,duration,opt_vol,opt_pan){var osc1=this.context.createOscillator(),osc2=this.context.createOscillator(),volume=this.context.createGain();osc1.type="triangle",osc2.type="triangle",volume.gain.value=.1,(this.panner?(this.panner.pan.value=opt_pan||0,osc1.connect(volume).connect(this.panner),osc2.connect(volume).connect(this.panner),this.panner):(osc1.connect(volume),osc2.connect(volume),volume)).connect(this.context.destination),osc1.frequency.value=frequency+1,osc2.frequency.value=frequency-2,volume.gain.setValueAtTime(opt_vol||.01,startTime+duration-.05),volume.gain.linearRampToValueAtTime(1e-5,startTime+duration),osc1.start(startTime),osc2.start(startTime),osc1.stop(startTime+duration),osc2.stop(startTime+duration)}background(){var now;this.audioCues&&(now=this.context.currentTime,this.playNote(493.883,now,.116),this.playNote(659.255,now+.116,.232),this.loopFootSteps())}loopFootSteps(){this.audioCues&&!this.bgSoundIntervalId&&(this.bgSoundIntervalId=setInterval(function(){this.playNote(73.42,this.context.currentTime,.05,.16),this.playNote(69.3,this.context.currentTime+.116,.116,.16)}.bind(this),280))}cancelFootSteps(){this.audioCues&&this.bgSoundIntervalId&&(clearInterval(this.bgSoundIntervalId),this.bgSoundIntervalId=null,this.playNote(103.83,this.context.currentTime,.232,.02),this.playNote(116.54,this.context.currentTime+.116,.232,.02))}collect(){var now;this.audioCues&&(this.cancelFootSteps(),now=this.context.currentTime,this.playNote(830.61,now,.116),this.playNote(1318.51,now+.116,.232))}jump(){var now;this.audioCues&&(now=this.context.currentTime,this.playNote(659.25,now,.116,.3,-.6),this.playNote(880,now+.116,.232,.3,-.6))}}export{GeneratedSoundFx};